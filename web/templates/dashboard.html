{% extends "base.html" %}

{% block head %}
  <link rel="stylesheet" href="/static/css/dashboard.css">
  <link rel="stylesheet" href="/static/vendor/splide/splide.min.css">
{% endblock %}

{% block content %}

<div class="card-slideshow-container">
  <div id="slideshow" class="splide" aria-label="Featured Models Slideshow">
    {% if slideshow_images %}
      <div class="splide__track">
        <ul class="splide__list">
          {% for image in slideshow_images %}
          <li class="splide__slide">
            <img src="{{ image.url }}" alt="{{ image.model_name }}" loading="lazy">
            <div class="splide__caption">{{ image.model_name }}</div>
          </li>
          {% endfor %}
        </ul>
      </div>
    {% else %}
      <div class="slideshow-empty">
        No images yet. Upload media to start the slideshow.
      </div>
    {% endif %}
  </div>
</div>



<!-- HUD NAV BAR -->
<div class="hud-nav">
  <span>Models: {{ model_count }}</span>
  <span>|</span>
  <span>Media: {{ media_count }}</span>
  <span>|</span>
  <a href="/models">View Models →</a>
</div>

<!-- CONTROLS -->
<div class="controls">
  <button id="shuffle-toggle" aria-label="Shuffle background">SHUFFLE</button>
  <button id="motion-toggle" aria-label="Pause background motion">PAUSE MOTION</button>
  <a href="/logout" aria-label="Logout">LOGOUT</a>
  <button id="logo-toggle" aria-label="Toggle logo">HIDE LOGO</button>
</div>

<div class="hud-status">Randomized • {{ media_count }} media</div>

<div id="rating-modal" class="rating-modal">
  <div class="rating-card">
    <h3 id="rating-title">Rate Image</h3>
    <img id="rating-preview" class="rating-preview" alt="">
    <label>
      Rating
      <div id="rating-value" class="rating-value">—</div>
    </label>
    <label>
      Caption
      <textarea id="rating-caption" rows="3" maxlength="280"></textarea>
    </label>
    <div class="rating-actions">
      <button id="rating-submit" type="button" aria-label="Save rating">Save</button>
      <button id="rating-cancel" type="button" aria-label="Close rating modal">Close</button>
    </div>
    <div id="rating-note" class="rating-note"></div>
  </div>
</div>

<script id="dashboard-data" type="application/json">
{{ {
  "images": slideshow_images | default([])
} | tojson }}
</script>
<script src="/static/vendor/splide/splide.min.js"></script>
<script src="/static/js/dashboard.js?v=1.8"></script>

{% endblock %}
